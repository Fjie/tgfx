<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>简易Web设计工具</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- 顶部操作菜单 -->
    <div class="top-menu">
        <img src="./assets/img/cocraft.png" alt="Logo" class="logo">
        <!-- 渲染模式切换开关 -->
        <div class="radio-group">
            <input type="radio" id="webRender" name="renderMode" value="web" checked>
            <label for="webRender">Web 渲染</label>
            <input type="radio" id="backendRender" name="renderMode" value="backend">
            <label for="backendRender" id="backendLabel">后端渲染</label>
        </div>
        <!-- 重置INP -->
        <button id="resetInp" class="reset-inp">重置 INP 数据</button>
    </div>

    <div class="container">
        <!-- 左侧工具栏 -->
        <div class="toolbar">
            <button id="addRect" title="添加矩形">□</button>
            <button id="addCircle" title="添加圆形">○</button>
            <button id="addText" title="添加文本">Ⓣ</button>
            <input type="number" id="shapeCounts" value="100" title="设置数量">
            <button id="addRandom" title="添加随机形状">随机</button>
            <button id="performanceTest" title="性能测试">性能测试</button> <!-- 新增按钮 -->

        </div>

        <!-- 画布区域 -->
        <div class="canvas-container">
            <svg id="canvas" viewBox="0 0 1920 1080" preserveAspectRatio="xMinYMin meet">
                <!-- 元素将被动态添加到这里 -->
            </svg>
            <canvas class="realCanvas" id="realCanvas" width="1920" height="1080"></canvas>
            <div class="tooltip" id="tooltip"></div>
        </div>

        <!-- 右侧属性编辑面板 -->
        <div class="properties-panel">
            <h3>属性编辑</h3>
            <div id="properties">
                <p>选择一个元素以编辑其属性。</p>
            </div>
            <div class="layers">
                <h3>图层管理</h3>
                <div id="layersList">
                    <!-- 图层列表将动态添加到这里 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 将计数器放入容器中 -->
    <div class="counters-container">
        <div id="shapeCounter" class="shape-counter">图形数量: 0</div>
        <div id="fpsCounter" class="fps-counter">FPS: 0</div>
        <div id="INPCounter" class="fps-counter">INP: 0</div>
        <div id="renderCounter" class="fps-counter"></div>
    </div>

    <!-- 引入新的非 ES 模块脚本，用于加载 WebAssembly -->
    <script src="./js/figma/ts/loadWasm.js"></script>

    <!-- 引入主脚本 -->
    <script type="module" src="./js/figma/ts/main.js"></script>
    <!-- 引入配置脚本 -->
    <script type="module" src="./js/figma/ts/config.js"></script>

    <script type="module">
        import { VIEWBOX_WIDTH, VIEWBOX_HEIGHT } from './js/figma/ts/config.js'; // 新增

        document.getElementById('canvas').setAttribute('viewBox', `0 0 ${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`);
        document.getElementById('realCanvas').setAttribute('width', VIEWBOX_WIDTH);
        document.getElementById('realCanvas').setAttribute('height', VIEWBOX_HEIGHT);
    </script>
</body>

</html>